# Database connection settings
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=app
quarkus.datasource.password=app
quarkus.datasource.jdbc.url=jdbc:postgresql://postgres:5432/db

# Hibernate schema update
quarkus.hibernate-orm.database.generation=update

# CORS configuration
quarkus.http.cors=true
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=Content-Disposition,Location
quarkus.http.cors.origins=${CORS_ORIGINS:http://localhost,https://localhost,http://localhost:8080,http://vm10.htl-leonding.ac.at,https://vm10.htl-leonding.ac.at,https://auth.htl-leonding.ac.at}
quarkus.http.cors.access-control-allow-credentials=true

# Build type
quarkus.package.jar.type=uber-jar

# Connection retry and pool settings
quarkus.datasource.jdbc.reconnect-attempts=10
quarkus.datasource.jdbc.acquisition-timeout=10
quarkus.datasource.jdbc.background-validation-interval=2
quarkus.datasource.jdbc.initial-size=1
quarkus.datasource.jdbc.min-size=1
quarkus.datasource.jdbc.max-size=8

# Keycloak Configuration
quarkus.oidc.auth-server-url=${KEYCLOAK_URL:https://auth.htl-leonding.ac.at/realms/2526_5bhitm}
quarkus.oidc.client-id=${KEYCLOAK_CLIENT_ID:frontend}
quarkus.oidc.application-type=service
quarkus.oidc.authentication.cookie-path=/
# TLS verification enabled for production security
quarkus.oidc.tls.verification=required
# Allow application to start even if OIDC server is unavailable
quarkus.oidc.connection-delay=10s
quarkus.oidc.connection-retry-count=3

# Mailer Configuration (Gmail SMTP)
quarkus.mailer.from=${SMTP_FROM:d4d.notification@gmail.com}
quarkus.mailer.host=${SMTP_HOST:smtp.gmail.com}
quarkus.mailer.port=${SMTP_PORT:587}
quarkus.mailer.start-tls=REQUIRED
quarkus.mailer.username=${SMTP_USERNAME:d4d.notification@gmail.com}
quarkus.mailer.password=${SMTP_PASSWORD:ehzrxtbcdbdngxys}
quarkus.mailer.mock=false

# Notification Service Configuration
notification.test-email=${TEST_EMAIL}

# Application Base URL (for links in emails)
app.base-url=${APP_BASE_URL:https://vm10.htl-leonding.ac.at}
app.frontend.url=${APP_FRONTEND_URL:https://vm10.htl-leonding.ac.at}
app.backend.url=${APP_BACKEND_URL:https://vm10.htl-leonding.ac.at/api}
app.name=D4D Nachhilfeb√∂rse
app.email-domain=students.htl-leonding.ac.at

# Email domain for students (used to generate email addresses from usernames)
app.email-domain=students.htl-leonding.ac.at
